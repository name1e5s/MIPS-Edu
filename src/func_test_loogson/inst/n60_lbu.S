#include <asm.h>
#include <regdef.h>
#include <inst_test.h>

LEAF(n60_lbu_test)
    .set noreorder
    addiu s0, s0, 1
    li  s2, 0x0
###test inst
    TEST_LBU(0xe4f76a00, 0x800da130, 0x00000768, 0x00000768, 0x00000000)
    TEST_LBU(0xee33dcd0, 0x800dbc2c, 0x00001868, 0x00001868, 0x000000d0)
    TEST_LBU(0xa6a67232, 0x800d8b40, 0x00002f07, 0x00002f04, 0x000000a6)
    TEST_LBU(0x2c62e6d4, 0x800d3cd4, 0x00000270, 0x00000270, 0x000000d4)
    TEST_LBU(0x84b70109, 0x800d8000, 0x00000003, 0x00000000, 0x00000084)
    TEST_LBU(0xace9f794, 0x800d8000, 0x00000000, 0x00000000, 0x00000094)
    TEST_LBU(0x60a3b6d8, 0x800d8000, 0x00000001, 0x00000000, 0x000000b6)
    TEST_LBU(0x954eb5ee, 0x800d8000, 0x00000001, 0x00000000, 0x000000b5)
    TEST_LBU(0x95ffcf80, 0x800d8000, 0x00000003, 0x00000000, 0x00000095)
    TEST_LBU(0xe20efe40, 0x800d8000, 0x00000000, 0x00000000, 0x00000040)
    TEST_LBU(0x826e0c40, 0x800d8000, 0x00000003, 0x00000000, 0x00000082)
    TEST_LBU(0x3c7f3796, 0x800d8000, 0x00000003, 0x00000000, 0x0000003c)
    TEST_LBU(0xd82d4498, 0x800d8000, 0x00000002, 0x00000000, 0x0000002d)
    TEST_LBU(0x00000000, 0x800d8000, 0x00000000, 0x00000000, 0x00000000)
###detect exception
    bne s2, zero, inst_error
    nop
###score ++
    addiu s3, s3, 1
###output (s0<<24)|s3
inst_error:  
    sll t1, s0, 24
    or t0, t1, s3 
    sw t0, 0(s1)
    jr ra
    nop
END(n60_lbu_test)
