#include <asm.h>
#include <regdef.h>
#include <inst_test.h>

LEAF(n4_beq_test)
    .set noreorder
    addiu s0, s0 ,1
    li  s2, 0x0
###test inst
    TEST_BEQ(0x52919078, 0x81468400, 0x0fb16a80, 0xdf225ddc, 0x00000000, 0x00000000)
    TEST_BEQ(0x90db14d8, 0xa81a7400, 0x2fdac790, 0xe4a202d3, 0x00000000, 0x00000000)
    TEST_BEQ(0xbca1eea8, 0xa4ac24ae, 0xc64ac344, 0xc38ed9a0, 0x00000000, 0x00000000)
    TEST_BEQ(0xc7820fa8, 0x71f9dbb0, 0x523b85b0, 0xcb7dbd40, 0x00000000, 0x00000000)
    TEST_BEQ(0x65a8a904, 0x042a7ac0, 0x2308a218, 0x602bdf60, 0x00000000, 0x00000000)
    TEST_BEQ(0x00000000, 0xa148d73e, 0x3cc0f346, 0xac6c1dc0, 0x00000000, 0x00000000)
    TEST_BEQ(0x00000000, 0x9185cdc0, 0x9478c240, 0xc72b9d10, 0x00000000, 0x00000000)
    TEST_BEQ(0x00000000, 0x10640e9a, 0xa172f0f0, 0x4b8349b8, 0x00000000, 0x00000000)
    TEST_BEQ(0x00000000, 0x77c77558, 0xdf7c77fa, 0x64527238, 0x00000000, 0x00000000)
    TEST_BEQ(0x00000000, 0x24922d7c, 0xd2894566, 0x07830114, 0x00000000, 0x00000000)
    TEST_BEQ(0x00000000, 0x6b926783, 0xdbc3f268, 0x0a44caf8, 0x00000000, 0x00000000)
    TEST_BEQ(0x00000000, 0x00000000, 0xfc98d552, 0xca9087ec, 0xfc98d552, 0xca9087ec)
###detect exception
    bne s2, zero, inst_error
    nop
###score ++
    addiu s3, s3, 1
###output (s0<<24)|s3
inst_error:  
    sll t1, s0, 24
    or t0, t1, s3 
    sw t0, 0(s1)
    jr ra
    nop
END(n4_beq_test)
