#include <asm.h>
#include <regdef.h>
#include <inst_test.h>

LEAF(n12_sw_test)
    .set noreorder
    addiu s0, s0 ,1
    li  s2, 0x0
###test inst
    TEST_SW(0x61754443, 0x800d87a0, 0x00007b14, 0x00007b14, 0x61754443)
    TEST_SW(0x873f383a, 0x800d8000, 0x000047b8, 0x000047b8, 0x873f383a)
    TEST_SW(0x50d54ce0, 0x800d8000, 0x00008320, 0x00008320, 0x50d54ce0)
    TEST_SW(0x8502ea18, 0x800d8000, 0x0000f2f0, 0x0000f2f0, 0x8502ea18)
    TEST_SW(0x09f2b630, 0x800d8000, 0x0000aa24, 0x0000aa24, 0x09f2b630)
    TEST_SW(0xe8079b47, 0x800d8000, 0x000041e0, 0x000041e0, 0xe8079b47)
    TEST_SW(0x5de6e330, 0x800d8000, 0x00000000, 0x00000000, 0x5de6e330)
    TEST_SW(0xbf637404, 0x800d8000, 0x00000000, 0x00000000, 0xbf637404)
    TEST_SW(0x99227ac0, 0x800d8000, 0x00000000, 0x00000000, 0x99227ac0)
    TEST_SW(0xddecd270, 0x800d8000, 0x00000000, 0x00000000, 0xddecd270)
    TEST_SW(0x06a06018, 0x800d8000, 0x00000000, 0x00000000, 0x06a06018)
    TEST_SW(0x09537c5f, 0x800d8000, 0x00000000, 0x00000000, 0x09537c5f)
    TEST_SW(0x36964fd0, 0x800d8000, 0x00000000, 0x00000000, 0x36964fd0)
    TEST_SW(0xe67b1aa6, 0x800d8000, 0x00000000, 0x00000000, 0xe67b1aa6)
    TEST_SW(0x00000000, 0x800d8000, 0x00000000, 0x00000000, 0x00000000)

###detect exception
    bne s2, zero, inst_error
    nop
###score ++
    addiu s3, s3, 1
###output (s0<<24)|s3
inst_error:  
    sll t1, s0, 24
    or t0, t1, s3 
    sw t0, 0(s1)
    jr ra
    nop
END(n12_sw_test)
