#include <asm.h>
#include <regdef.h>
#include <inst_test.h>

LEAF(n62_lhu_test)
    .set noreorder
    addiu s0, s0, 1
    li  s2, 0x0
###test inst
    TEST_LHU(0x258707b2, 0x800dbd8c, 0x00001c34, 0x00001c34, 0x000007b2)
    TEST_LHU(0x263aa087, 0x800d6920, 0x0000641a, 0x00006418, 0x0000263a)
    TEST_LHU(0xb5e11b1a, 0x800d3a6c, 0x00005164, 0x00005164, 0x00001b1a)
    TEST_LHU(0x9cc84d98, 0x800d8160, 0x00001268, 0x00001268, 0x00004d98)
    TEST_LHU(0x75e313d0, 0x800d993c, 0x0000456c, 0x0000456c, 0x000013d0)
    TEST_LHU(0x6d19e13e, 0x800db968, 0x000035de, 0x000035dc, 0x00006d19)
    TEST_LHU(0x4a1efc6c, 0x800d5a08, 0x0000a2f0, 0x0000a2f0, 0x0000fc6c)
    TEST_LHU(0x32e321c0, 0x800d41d4, 0x00006844, 0x00006844, 0x000021c0)
    TEST_LHU(0xcf083100, 0x800d8000, 0x00000002, 0x00000000, 0x0000cf08)
    TEST_LHU(0xace84af0, 0x800d8000, 0x00000000, 0x00000000, 0x00004af0)
    TEST_LHU(0xc5d1d550, 0x800d8000, 0x00000002, 0x00000000, 0x0000c5d1)
    TEST_LHU(0xfade1c80, 0x800d8000, 0x00000000, 0x00000000, 0x00001c80)
    TEST_LHU(0x2579310c, 0x800d8000, 0x00000002, 0x00000000, 0x00002579)
    TEST_LHU(0x00000000, 0x800d8000, 0x00000000, 0x00000000, 0x00000000)
###detect exception
    bne s2, zero, inst_error
    nop
###score ++
    addiu s3, s3, 1
###output (s0<<24)|s3
inst_error:  
    sll t1, s0, 24
    or t0, t1, s3 
    sw t0, 0(s1)
    jr ra
    nop
END(n62_lhu_test)
