#include <asm.h>
#include <regdef.h>
#include <inst_test.h>

LEAF(n36_srlv_test)
    .set noreorder
    addiu s0, s0 ,1
    li  s2, 0x00
###test inst
    TEST_SRLV(0x1f8f6000, 0x0000001c, 0x00000001)
    TEST_SRLV(0xe51f6e9c, 0x00000002, 0x3947dba7)
    TEST_SRLV(0x055df7e0, 0x00000008, 0x00055df7)
    TEST_SRLV(0xa821b3e6, 0x00000019, 0x00000054)
    TEST_SRLV(0xf3330c74, 0x0000000a, 0x003cccc3)
    TEST_SRLV(0x096b5f00, 0x0000001f, 0x00000000)
    TEST_SRLV(0x16f2bd5e, 0x0000001b, 0x00000002)
    TEST_SRLV(0x6c59a85e, 0x0000001b, 0x0000000d)
    TEST_SRLV(0x98c96979, 0x00000007, 0x013192d2)
    TEST_SRLV(0x9289a95e, 0x0000000f, 0x00012513)
    TEST_SRLV(0x7d271631, 0x00000010, 0x00007d27)
    TEST_SRLV(0xa7dcf7a0, 0x0000000d, 0x00053ee7)
    TEST_SRLV(0xeb764460, 0x00000000, 0xeb764460)
    TEST_SRLV(0x1ee8e1f0, 0x00000017, 0x0000003d)
    TEST_SRLV(0x02fc437c, 0x0000001a, 0x00000000)
    TEST_SRLV(0xd38b24a0, 0x00000013, 0x00001a71)
    TEST_SRLV(0x36fb4114, 0x00000013, 0x000006df)
    TEST_SRLV(0xd4683c56, 0x00000005, 0x06a341e2)
    TEST_SRLV(0x00000000, 0x0000000f, 0x00000000)
    TEST_SRLV(0x00000000, 0x0000001c, 0x00000000)
    TEST_SRLV(0x00000000, 0x0000001d, 0x00000000)
    TEST_SRLV(0x00000000, 0x00000016, 0x00000000)
    TEST_SRLV(0x00000000, 0x00000018, 0x00000000)
    TEST_SRLV(0x00000000, 0x00000017, 0x00000000)
    TEST_SRLV(0x00000000, 0x0000000c, 0x00000000)
    TEST_SRLV(0x00000000, 0x00000000, 0x00000000)
###detect exception
    bne s2, zero, inst_error
    nop
###score ++
    addiu s3, s3, 1
###output (s0<<24)|s3
inst_error:  
    sll t1, s0, 24
    or t0, t1, s3 
    sw t0, 0(s1)
    jr ra
    nop
END(n36_srlv_test)
